import{r as a,q as E,v as C,j as e,$ as T,Y as A}from"./app-93n4-YE1.js";import{A as R}from"./AdminLayout-BIeZ94su.js";import{D as S,a as U,b as $,c as Z,d as _,e as B}from"./dialog-dmNlH9AS.js";import{T as F,a as H,b as u,c as n,d as I,e as l}from"./table-D_xab-M3.js";import{B as O}from"./button-b6E2TuAP.js";import{u as M}from"./toaster-CR_CLjT4.js";import{F as L}from"./PencilSquareIcon-BtsTF4Sc.js";import"./Dropdown--SqrWfdR.js";import"./transition-B8_0YiEE.js";import"./users-Bum_EUm8.js";import"./index-DEGu_kMU.js";import"./index-C6Troi14.js";import"./index-BYPC565r.js";import"./ClipboardDocumentIcon-rUgeVu8g.js";import"./index-CKryKcUP.js";function Y({title:r,titleId:t,...o},i){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},o),r?a.createElement("title",{id:t},r):null,a.createElement("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z",clipRule:"evenodd"}))}const k=a.forwardRef(Y);function q({title:r,titleId:t,...o},i){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},o),r?a.createElement("title",{id:t},r):null,a.createElement("path",{fillRule:"evenodd",d:"M18.685 19.097A9.723 9.723 0 0 0 21.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 0 0 3.065 7.097A9.716 9.716 0 0 0 12 21.75a9.716 9.716 0 0 0 6.685-2.653Zm-12.54-1.285A7.486 7.486 0 0 1 12 15a7.486 7.486 0 0 1 5.855 2.812A8.224 8.224 0 0 1 12 20.25a8.224 8.224 0 0 1-5.855-2.438ZM15.75 9a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z",clipRule:"evenodd"}))}const P=a.forwardRef(q);function ne({users:r,filters:t}){var f,g;const{props:o}=E(),i=(f=o.flash)==null?void 0:f.success,m=(g=o.flash)==null?void 0:g.error,[j,x]=a.useState(!1),{data:c,setData:h,get:b}=C({search:t.search||"",division:t.division||""}),{toast:p}=M();a.useEffect(()=>{const s=setTimeout(()=>{b(route("admin.view_users"),{preserveState:!0,replace:!0})},300);return()=>clearTimeout(s)},[c.search,c.division]),a.useEffect(()=>{i&&(p({title:"✅ Success",description:i}),x(!0)),m&&p({title:"❌ Error",description:m,variant:"destructive"})},[i,m]);const v=s=>{console.log(`Editing user with ID: ${s}`)},w=s=>{console.log(`Deleting user with ID: ${s}`)};return e.jsxs(R,{header:"Schools Division Office - Ilagan | Users",children:[e.jsx(T,{title:"Users"}),e.jsx("div",{className:" rounded-lg mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4",children:[e.jsx("div",{className:"flex flex-col md:flex-row gap-4 w-full md:w-auto mb-4 md:mb-0",children:e.jsxs("form",{onSubmit:s=>s.preventDefault(),className:"flex flex-wrap items-center gap-3",children:[e.jsx("input",{type:"text",name:"search",placeholder:"Name...",className:"w-96 border border-gray-300 px-4 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:c.search,onChange:s=>h("search",s.target.value)}),e.jsxs("select",{value:c.division,onChange:s=>h("division",s.target.value),className:"border border-gray-300 px-10 py-2 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"All Divisions"}),t.divisions.map(s=>e.jsx("option",{value:s.id,children:s.division},s.id))]})]})}),e.jsx("a",{href:route("admin.create_user_form"),className:"bg-blue-600 text-white px-5 py-2 rounded-lg hover:bg-blue-700 transition duration-300 ease-in-out shadow-md hover:shadow-lg w-full md:w-auto text-center",children:"+ Add User"})]})}),e.jsxs("div",{className:"overflow-x-auto bg-white rounded-lg shadow-md",children:[e.jsxs(F,{children:[e.jsx(H,{children:e.jsxs(u,{children:[e.jsx(n,{children:"ID"}),e.jsx(n,{children:"Name"}),e.jsx(n,{children:"Email"}),e.jsx(n,{children:"Division"}),e.jsx(n,{children:"Position"}),e.jsx(n,{children:"Role"}),e.jsx(n,{className:"text-center",children:"Actions"})]})}),e.jsx(I,{children:r.data&&r.data.length>0?r.data.map(s=>{var d;return e.jsxs(u,{className:"hover:bg-blue-50 transition duration-150",children:[e.jsx(l,{className:"font-medium",children:s.id}),e.jsx(l,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(P,{className:"w-5 h-5 text-gray-400 mr-2"}),s.firstname," ",s.middleinitial," ",s.lastname]})}),e.jsx(l,{children:s.email}),e.jsx(l,{children:((d=s.division)==null?void 0:d.division)||e.jsx("span",{className:"text-gray-500 italic",children:"N/A"})}),e.jsx(l,{children:s.position||e.jsx("span",{className:"text-gray-500 italic",children:"N/A"})}),e.jsx(l,{children:e.jsx("div",{className:"flex flex-wrap gap-1",children:s.roles.map((N,y)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs",children:N.name.replace(/_/g," ").replace(/\b\w/g,D=>D.toUpperCase())},y))})}),e.jsxs(l,{className:"text-center",children:[e.jsx("button",{onClick:()=>v(s.id),className:"inline-flex items-center px-3 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 transition mr-2",title:"Edit User",children:e.jsx(L,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>w(s.id),className:"inline-flex items-center px-3 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 transition",title:"Delete User",children:e.jsx(k,{className:"w-4 h-4"})})]})]},s.id)}):e.jsx(u,{children:e.jsx(l,{colSpan:7,className:"text-center py-6 text-gray-500",children:"No users found."})})})]}),e.jsx("div",{className:"flex items-center justify-center space-x-1 mt-6",children:r.links.map((s,d)=>e.jsx(A,{href:s.url||"#",className:`
                                min-w-[40px] px-3 py-2 text-sm font-medium rounded-lg transition
                                ${s.active?"bg-blue-600 text-white shadow-md":"bg-white text-gray-700 border hover:bg-blue-50"}
                                ${s.url?"":"cursor-not-allowed opacity-50"}
                            `,dangerouslySetInnerHTML:{__html:s.label}},d))})]}),e.jsx(S,{open:j,onOpenChange:x,children:e.jsxs(U,{children:[e.jsxs($,{children:[e.jsx(Z,{children:"Success"}),e.jsx(_,{children:i})]}),e.jsx(B,{children:e.jsx(O,{onClick:()=>x(!1),children:"Close"})})]})})]})}export{ne as default};
