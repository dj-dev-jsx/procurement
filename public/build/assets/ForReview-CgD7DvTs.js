import{r as s,m,j as e,$ as b}from"./app-93n4-YE1.js";import{A as j}from"./ApproverLayout-CJpNhpE3.js";import{T as f}from"./Tooltip-BDMbMjY5.js";import"./sweetalert2.esm.all-BQIkj5Wb.js";import{c as w}from"./index-DEGu_kMU.js";import{F as N}from"./XMarkIcon-BajPl_Ya.js";import"./Dropdown--SqrWfdR.js";import"./transition-B8_0YiEE.js";import"./toaster-CR_CLjT4.js";import"./index-BYPC565r.js";import"./index-C6Troi14.js";import"./ClipboardDocumentIcon-rUgeVu8g.js";import"./clipboard-check-BUpBKaMS.js";import"./circle-check-big-CDYAS76j.js";import"./file-text-BWCkVFPU.js";import"./BellAlertIcon-DQ7YZFl9.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],P=w("eye",S);function B({sentPurchaseRequests:d,filters:a={},flash:x}){const[c,p]=s.useState(null),[u,r]=s.useState(!1),[o,h]=s.useState(a.prNumber||""),[l,g]=s.useState(a.focalPerson||""),[i,v]=s.useState(a.division||""),[n,y]=s.useState(a.status||"");return s.useEffect(()=>{const t=setTimeout(()=>{m.get(route("bac_approver.for_review"),{prNumber:o,focalPerson:l,division:i,status:n},{preserveState:!0,preserveScroll:!0,replace:!0})},400);return()=>clearTimeout(t)},[o,l,i,n]),s.useEffect(()=>{let t;return(()=>{t=setInterval(()=>{document.visibilityState==="visible"&&m.reload({only:["sentPurchaseRequests"],preserveScroll:!0,preserveState:!0})},1e4)})(),()=>clearInterval(t)},[]),e.jsxs(j,{header:"Schools Division Office - Ilagan | For Review",flash:x,children:[e.jsx(b,{title:"PRs For Review"}),e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow space-y-6",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:e.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Purchase Requests For Review"})}),e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{type:"text",value:o,onChange:t=>h(t.target.value),placeholder:"Search PR Number...",className:"rounded-md border border-gray-300 px-4 py-2 text-sm shadow-sm w-60"}),e.jsx("input",{type:"text",value:l,onChange:t=>g(t.target.value),placeholder:"Search Focal Person...",className:"rounded-md border border-gray-300 px-4 py-2 text-sm shadow-sm w-60"}),e.jsxs("select",{value:i,onChange:t=>v(t.target.value),className:"rounded-md border border-gray-300 px-4 py-2 text-sm shadow-sm w-44",children:[e.jsx("option",{value:"",children:"All Divisions"}),e.jsx("option",{value:"1",children:"SGOD"}),e.jsx("option",{value:"2",children:"OSDS"}),e.jsx("option",{value:"3",children:"CID"})]}),e.jsxs("select",{value:n,onChange:t=>y(t.target.value),className:"rounded-md border border-gray-300 px-4 py-2 text-sm shadow-sm w-44",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]})}),d.length===0?e.jsx("p",{className:"text-center text-gray-500 py-12 text-lg font-medium",children:"No purchase requests ready for review."}):e.jsx("div",{className:"overflow-x-auto rounded-md border border-gray-200 shadow-sm bg-white",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-700",children:e.jsx("tr",{children:["PR Number","Focal Person","Division","Purpose","Status","Date Sent","Action"].map(t=>e.jsx("th",{className:"px-6 py-3 text-center font-semibold uppercase tracking-wider text-xs",children:t},t))})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:d.map(t=>e.jsxs("tr",{className:"text-center hover:bg-indigo-50 transition",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-indigo-600",children:e.jsx(f,{to:route("bac_approver.show_details",t.id),tooltip:"View PR details",className:"hover:underline focus:underline",children:t.pr_number})}),e.jsx("td",{className:"px-6 py-4 text-gray-800",children:[t.focal_person.firstname,t.focal_person.middlename,t.focal_person.lastname].filter(Boolean).join(" ")}),e.jsx("td",{className:"px-6 py-4 text-gray-800",children:t.division.division}),e.jsx("td",{className:"px-6 py-4 text-gray-700",children:t.purpose}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${t.status.toLowerCase()==="approved"?"bg-green-100 text-green-800":t.status.toLowerCase()==="pending"?"bg-yellow-100 text-yellow-800":t.status.toLowerCase()==="rejected"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:t.status})}),e.jsx("td",{className:"px-6 py-4 text-gray-600 font-mono text-sm whitespace-nowrap",children:new Date(t.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 flex space-x-2 justify-center",children:e.jsxs("div",{className:"relative group inline-block",children:[e.jsx("button",{onClick:()=>{p(`/storage/${t.approval_image}`),r(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm shadow",children:e.jsx(P,{})}),e.jsx("span",{className:"absolute bottom-full mb-2 hidden group-hover:block bg-gray-800 text-white text-xs rounded py-1 px-2 whitespace-nowrap",children:"View Form"})]})})]},t.id))})]})}),u&&c&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",onClick:()=>r(!1),children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-xl w-full max-h-[90vh] overflow-auto",onClick:t=>t.stopPropagation(),children:[e.jsx("button",{onClick:()=>r(!1),className:"absolute top-3 right-3 text-gray-600 hover:text-gray-900 focus:outline-none","aria-label":"Close modal",children:e.jsx(N,{className:"w-6 h-6"})}),e.jsx("h3",{id:"modal-title",className:"text-xl font-semibold text-gray-800 p-4 border-b",children:"Approved Form"}),e.jsx("img",{src:c,alt:"Approved Form",className:"w-full h-auto object-contain rounded-b-lg p-4"})]})})]})]})}export{B as default};
