import{v as y,r as h,j as t,$ as g}from"./app-93n4-YE1.js";import{S as f,P as p}from"./SupplyOfficerLayout-CIJBK7rX.js";import"./toaster-CR_CLjT4.js";import"./index-BYPC565r.js";import"./index-DEGu_kMU.js";import"./index-C6Troi14.js";import"./Dropdown--SqrWfdR.js";import"./transition-B8_0YiEE.js";import"./XMarkIcon-BajPl_Ya.js";import"./clipboard-check-BUpBKaMS.js";function A({inventoryData:d,filters:c}){const{data:o,setData:n,get:i}=y({search:c.search||"",status:c.status||"",date_received:c.date_received||""});h.useEffect(()=>{const e=setTimeout(()=>{i(route("supply_officer.inventory"),{preserveState:!0,replace:!0})},300);return()=>clearTimeout(e)},[o.search,o.status,o.date_received]);const u=(e=>{if(!e||!e.data)return[];const s=new Map;return e.data.forEach(a=>{const r=a.item_desc;if(!s.has(r))s.set(r,{...a,total_stock:parseFloat(a.total_stock)||0});else{const l=s.get(r);l.total_stock=(parseFloat(l.total_stock)||0)+(parseFloat(a.total_stock)||0)}}),Array.from(s.values())})(d);return t.jsxs(f,{header:"Schools Divisions Office - Ilagan | Inventory",children:[t.jsx(g,{title:"Inventory"}),t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-8 gap-4",children:[t.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Inventory"}),t.jsxs("form",{onSubmit:e=>e.preventDefault(),className:"flex flex-wrap gap-3",children:[t.jsx("input",{type:"text",placeholder:"Search item or Focal Person",className:"w-64 border border-gray-300 px-4 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:o.search,onChange:e=>n("search",e.target.value)}),t.jsxs("select",{value:o.status,onChange:e=>n("status",e.target.value),className:"border border-gray-300 px-8 py-2 rounded-md",children:[t.jsx("option",{value:"",children:"All Statuses"}),t.jsx("option",{value:"Available",children:"Available"}),t.jsx("option",{value:"Issued",children:"Issued"})]})]})]}),t.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg shadow-sm bg-white",children:t.jsxs("table",{className:"w-full table-auto text-sm divide-y divide-gray-200",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsx("tr",{children:["Requested By","Specs","Unit","Total Stock","Unit Cost","Total Price","Status","Actions"].map(e=>t.jsx("th",{className:"px-6 py-3 text-xs font-bold text-gray-600 uppercase tracking-wide text-center",children:e},e))})}),t.jsx("tbody",{className:"divide-y divide-gray-100 text-center",children:u.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:"8",className:"py-12 text-gray-500 text-lg font-medium",children:"No Inventory Found."})}):u.map(e=>{var x;const s=e.requested_by?`${e.requested_by.firstname} ${e.requested_by.middlename} ${e.requested_by.lastname}`:"N/A",a=((x=e.unit)==null?void 0:x.unit)??"N/A",r=parseFloat(e.unit_cost)||0,l=parseFloat(e.total_stock)||0,m=(r*l).toFixed(2);return t.jsxs("tr",{className:"hover:bg-blue-50 transition duration-200",children:[t.jsx("td",{className:"px-6 py-4 font-semibold text-blue-700",children:s}),t.jsx("td",{className:"px-6 py-4",children:e.item_desc}),t.jsx("td",{className:"px-6 py-4",children:a}),t.jsx("td",{className:"px-6 py-4",children:l}),t.jsxs("td",{className:"px-6 py-4",children:["₱ ",r.toFixed(2)]}),t.jsxs("td",{className:"px-6 py-4",children:["₱ ",m]}),t.jsx("td",{className:"px-6 py-4",children:e.status}),t.jsx("td",{className:"px-6 py-4",children:e.status==="Issued"?t.jsxs("span",{className:"bg-gray-300 text-gray-600 px-3 py-2 rounded cursor-not-allowed flex items-center justify-center gap-1",children:[t.jsx(p,{size:16})," Already Issued"]}):t.jsxs("a",{href:route("supply_officer.issuance",{po_id:e.po_id,inventory_id:e.id}),className:"bg-blue-600 text-white px-3 py-2 rounded hover:bg-blue-700 transition flex items-center justify-center gap-1",children:[t.jsx(p,{size:16})," Issue Item"]})})]},e.id)})})]})}),t.jsx("div",{className:"mt-6 flex justify-center flex-wrap gap-1",children:d.links.map((e,s)=>t.jsx("button",{disabled:!e.url,onClick:()=>e.url&&i(e.url),className:`px-3 py-1 text-sm border rounded-md ${e.active?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,dangerouslySetInnerHTML:{__html:e.label}},s))})]})}export{A as default};
