import{r as _,v as k,j as e,$ as I}from"./app-93n4-YE1.js";import{u as O}from"./toaster-CR_CLjT4.js";import{S as E}from"./SupplyOfficerLayout-CIJBK7rX.js";import{F as $}from"./file-text-BWCkVFPU.js";import{S as q}from"./send-horizontal-DQjArJOU.js";import"./index-BYPC565r.js";import"./index-DEGu_kMU.js";import"./index-C6Troi14.js";import"./Dropdown--SqrWfdR.js";import"./transition-B8_0YiEE.js";import"./XMarkIcon-BajPl_Ya.js";import"./clipboard-check-BUpBKaMS.js";function J({purchaseOrder:n,inventoryItem:y,user:f}){var x,b,p,h,g;const[j,o]=_.useState(!1),{toast:d}=O(),s=(x=n.details)==null?void 0:x[0],r=(b=s==null?void 0:s.pr_detail)==null?void 0:b.purchase_request,a=(p=s==null?void 0:s.pr_detail)==null?void 0:p.product,m=r?`${r.focal_person.firstname} ${r.focal_person.middlename} ${r.focal_person.lastname}`:"N/A",{data:i,setData:l,post:v,processing:c,errors:u}=k({po_id:s.po_id,ics_number:n.po_number,inventory_item_id:y.id,received_by:r.focal_person.id,received_from:f.id,quantity:s==null?void 0:s.quantity,unit_cost:s==null?void 0:s.unit_price,total_cost:s==null?void 0:s.total_price,remarks:""}),N=a?`${a.name} (${a.specs})`:"N/A",w=t=>{t.preventDefault(),o(!0)},C=()=>{v(route("supply_officer.store_ics"),{preserveScroll:!0,onSuccess:()=>{d({title:"✅ Success",description:"ICS issuance submitted successfully!",className:"bg-green-600 text-white"}),o(!1)},onError:()=>{d({title:"❌ Error",description:"Failed to submit ICS issuance.",variant:"destructive"}),o(!1)}})};return e.jsxs(E,{header:"Schools Divisions Office - Ilagan | Inventory Custodian Slip",children:[e.jsx(I,{title:"ICS Form"}),e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"inline-flex items-center px-4 py-2 bg-white text-blue-800 border border-blue-300 text-sm font-semibold rounded-md hover:bg-blue-100 hover:border-blue-400 mr-4 mb-4 shadow-sm transition",children:"← Back"}),e.jsxs("div",{className:"bg-blue-50 p-8 rounded-xl shadow-md",children:[e.jsxs("h2",{className:"text-3xl font-bold text-blue-800 mb-1 flex items-center gap-2",children:[e.jsx($,{size:24})," Inventory Custodian Slip (ICS)"]}),e.jsxs("p",{className:"text-sm text-gray-700 mb-6",children:[e.jsx("strong",{children:"Note:"})," This item is categorized as"," ",e.jsx("em",{children:"Semi-Expendable (Below 50k)"})," and will be issued using an ICS form."]}),Object.keys(u).length>0&&e.jsx("div",{className:"col-span-2 bg-red-100 text-red-700 p-4 rounded mb-4",children:e.jsx("ul",{className:"list-disc list-inside",children:Object.entries(u).map(([t,S])=>e.jsx("li",{children:S},t))})}),e.jsxs("form",{onSubmit:w,className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Designation"}),e.jsx("input",{value:((h=r==null?void 0:r.division)==null?void 0:h.division)??"N/A",readOnly:!0,className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"ICS No."}),e.jsx("input",{type:"text",placeholder:"ICS Number",value:i.ics_number,onChange:t=>l("ics_number",t.target.value),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("input",{value:N,readOnly:!0,className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Quantity"}),e.jsx("input",{type:"number",placeholder:"Quantity",value:i.quantity,onChange:t=>l("quantity",t.target.value),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Unit"}),e.jsx("input",{value:((g=a==null?void 0:a.unit)==null?void 0:g.unit)??"N/A",readOnly:!0,className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Unit Cost"}),e.jsx("input",{type:"number",placeholder:"Unit Cost",value:i.unit_cost,onChange:t=>l("unit_cost",t.target.value),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Total Cost"}),e.jsx("input",{type:"number",placeholder:"Total Cost",value:i.total_cost,onChange:t=>l("total_cost",t.target.value),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Requested By"}),e.jsx("input",{type:"text",value:m,readOnly:!0,className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Recipient"}),e.jsx("input",{type:"text",value:m,readOnly:!0,placeholder:"Enter recipient name",className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Remarks"}),e.jsx("textarea",{type:"text",value:i.remarks,onChange:t=>l("remarks",t.target.value),rows:"4",placeholder:"Enter remarks (optional)",className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white"})]})]}),e.jsx("div",{className:"col-span-full flex justify-end mt-4",children:e.jsxs("button",{type:"submit",disabled:c,className:"inline-flex items-center px-6 py-2 bg-blue-700 text-white text-sm font-medium rounded-md hover:bg-blue-800 transition disabled:opacity-50",children:[e.jsx(q,{size:16,className:"mr-2"}),c?"Submitting...":"Submit Issuance"]})})]})]}),j&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-40 z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md max-w-md w-full",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Confirm Submission"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to submit this ICS issuance?"}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{onClick:C,className:"px-4 py-2 bg-blue-700 text-white rounded-md hover:bg-blue-800",children:"Confirm"})]})]})})]})}export{J as default};
